Description: Fix CountLeadingZeros on non-ARMv5 hardware
Author: Vyacheslav Egorov
Origin: http://code.google.com/p/v8/source/detail?r=9736
Debian-Bug: http://bugs.debian.org/644163
Last-Update: 2011-10-21
--- a/src/arm/macro-assembler-arm.cc
+++ b/src/arm/macro-assembler-arm.cc
@@ -2901,8 +2901,8 @@
 #ifdef CAN_USE_ARMV5_INSTRUCTIONS
   clz(zeros, source);  // This instruction is only supported after ARM5.
 #else
-  mov(zeros, Operand(0, RelocInfo::NONE));
   Move(scratch, source);
+  mov(zeros, Operand(0, RelocInfo::NONE));
   // Top 16.
   tst(scratch, Operand(0xffff0000));
   add(zeros, zeros, Operand(16), LeaveCC, eq);
